package br.org.iamar.sgci.utils;

import java.text.Normalizer;

public class UserUtils {
	
	public static String getKey(String name, String birthDate, String profile) {
		if (name == null || birthDate == null || profile == null) {
			return null;
		}
		
		profile = profile.toLowerCase();
		
		birthDate = birthDate.replaceAll("-", "");
		
		name = removeAccents(name);

		String nomeLowerCase = name.toLowerCase();

		String[] tokens = nomeLowerCase.split(" ");

		int index = tokens.length - 1;

		String firstName = tokens[0];

		String lastName = tokens[index];

		if (tokens[index].equals("filho") || tokens[index].equals("j√∫nior") || tokens[index].equals("junior")) {
			lastName = tokens[index - 1];
		}

		return firstName + "_" + lastName + "_" + birthDate + "_" + profile;
	}
	
	public static String removeAccents(String str) {
	    return Normalizer.normalize(str, Normalizer.Form.NFD).replaceAll("[^\\p{ASCII}]", "");
	}

}
